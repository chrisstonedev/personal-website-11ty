---
title: 'Deploy Without Fear Using Automated Tests'
description: A conference talk about the usefulness of different types of automated tests.
layout: reveal.njk
---

<section>
	<h1 class="r-fit-text">Deploy Without Fear<br />Using Automated Tests</h1>
	<div
		style="display: grid; grid-template-columns: 2fr 1fr; align-items: center"
	>
		<p>Chris Stone<br /><a href="/">https://chrisstone.dev</a></p>
		<a href="/deploy-without-fear"
			><img
				src="/img/deploy-without-fear-2d-code.svg"
				alt="QR code for talk notes and slides"
		/></a>
	</div>
	<aside class="notes">
		Hello everyone! Thank you for coming to my talk. I'm Chris, and I'm going to
		talk about automated tests, and I'm going to talk about fear. If you go to
		chrisstone.dev or scan this QR code, you can get talk notes and the slides.
	</aside>
</section>
<section
	data-background="/img/deploy-without-fear-slides-sponsor-slide.png"
	data-background-size="contain"
>
	<aside class="notes">
		I am happy to be here at Atlanta Cloud Conference, and I want to express my
		gratitude to the organizers, the sponsors, the volunteers, my fellow
		speakers, and everyone who came out today.
	</aside>
</section>
<section>
	<h2>My goals today</h2>
	<ul>
		<li>Share lessons learned adding automated testing on various teams</li>
		<li>Show my appreciation of automated tests and what they can do for us</li>
		<li>Teach some basics of types of tests</li>
		<li>Inspire people here to write some great tests</li>
	</ul>
	<aside class="notes">My goals today...</aside>
</section>
<section>
	<h2>Why don't people write tests?</h2>
	<ul>
		<li>Not sure what to test</li>
		<li>Not sure what a "good test" looks like</li>
		<li>Someone else is in charge of the tests</li>
	</ul>
	<aside class="notes">
		...and while I can't answer these questions on behalf of your team, I hope
		that I can inspire you to think critically about some of these and maybe
		even gain some energy to fight for some good patterns. Also...
	</aside>
</section>
<section data-auto-animate>
	<h2>Why do I write tests?</h2>
	<ul>
		<li>Other things</li>
	</ul>
	<aside class="notes">
		...and while I can't answer these questions on behalf of your team, I hope
		that I can inspire you to think critically about some of these and maybe
		even gain some energy to fight for some good patterns.
	</aside>
</section>
<section data-auto-animate>
	<h2>Reasons to test</h2>
	<h3 class="fragment custom faded">Code coverage</h3>
	<h3 class="fragment custom faded">Regression detection</h3>
	<h3 class="fragment custom faded">Write simple code</h3>
	<h3 class="fragment custom faded">Executable documentation</h3>
</section>
<section data-auto-animate>
	<h2>Reasons to test</h2>
	<h3>Code coverage</h3>
	<p>100% is not realistic and not useful.</p>
	<p>You can increase coverage while not testing things of value.</p>
	<aside class="notes">Hello</aside>
</section>
<section data-auto-animate>
	<h2>Reasons to test</h2>
	<h3>Regression detection</h3>
	<ul>
		<li>CI/CD</li>
		<li>delete flaky tests, team should have faith in the test suite</li>
	</ul>
	<aside class="notes">Hello</aside>
</section>
<section data-auto-animate>
	<h2>Reasons to test</h2>
	<h3>Write simple code</h3>
	<ul>
		<li>TDD</li>
	</ul>
	<aside class="notes">Hello</aside>
</section>
<section data-auto-animate>
	<section data-auto-animate>
		<h2>Reasons to test</h2>
		<h3>Executable documentation</h3>
		<h4>Why tests are the best documentation</h4>
		<div style="display: flex">
			<p>Extensive documentation</p>
			<p>Imagine a Confluence screenshot</p>
		</div>
	</section>
	<section data-auto-animate>
		<h2>Reasons to test</h2>
		<h3>Executable documentation</h3>
		<h4>Why tests are the best documentation</h4>
		<pre><code data-id="comment-animation" data-trim data-noescape data-line-numbers class="language-ts">
// add numbers (oh, and replace this example with a better one!)
const x = 1 + 2;
  </code></pre>
		<p>Comments can lie</p>
	</section>
	<section data-auto-animate>
		<h2>Reasons to test</h2>
		<h3>Executable documentation</h3>
		<h4>Why tests are the best documentation</h4>
		<pre><code data-id="comment-animation" data-trim data-noescape data-line-numbers class="language-ts">
// add numbers (oh, and replace this example with a better one!)
const x = '1' + '2';
  </code></pre>
		<p>Comments can lie</p>
	</section>
	<section data-auto-animate>
		<h2>Reasons to test</h2>
		<h3>Executable documentation</h3>
		<h4>Why tests are the best documentation</h4>
		<pre><code data-trim data-noescape data-line-numbers class="language-ts">
// pretend there is a test here
  </code></pre>
		<p>A test will fail if it becomes untrue.</p>
	</section>
	<section data-auto-animate>
		<h2>Reasons to test</h2>
		<h3>Executable documentation</h3>
		<h4>What does it mean to have effective documentation?</h4>
		<ul>
			<li class="fragment custom faded">Readable</li>
			<li class="fragment custom faded">Relevant</li>
			<li class="fragment custom faded">Applicable</li>
		</ul>
		<aside class="notes">
			<p>Hi</p>
			<ul>
				<li>
					For one, tests should be readable. Just like with any code that we
					write, we optimize for readability.
				</li>
				<li>
					For one, tests should be readable. Just like with any code that we
					write, we optimize for readability.
				</li>
				<li>
					For one, tests should be readable. Just like with any code that we
					write, we optimize for readability.
				</li>
			</ul>
		</aside>
	</section>
	<aside class="notes">
		What does it mean to have effective documentation?
	</aside>
</section>
<section data-auto-animate data-auto-animate-restart>
	<section data-auto-animate>
		<h2>Types of tests</h2>
		<ul>
			<li>Unit</li>
			<li>Integration</li>
			<li>End-to-end</li>
		</ul>
		<aside class="notes">Hello!z</aside>
	</section>
	<section data-auto-animate>
		<h2>Types of tests</h2>
		<ul>
			<li>
				Unit
				<ul class="fragment grow">
					<li>a</li>
					<li>b</li>
					<li>c</li>
				</ul>
			</li>
			<li>Integration</li>
			<li>End-to-end</li>
		</ul>
		<aside class="notes">Hello!z</aside>
	</section>
	<section data-auto-animate>
		<h2>Types of tests</h2>
		<h3>Which type to pick</h3>
		<div
			style="display: grid; grid-template-columns: 1fr 1fr"
			class="r-stretch"
		>
			<figure class="fragment">
				<img
					src="/img/deploy-without-fear-slides-test-pyramid.png"
					alt="Test Pyramid"
					style="height: 50%"
				/>
				<figcaption>Test Pyramid</figcaption>
			</figure>
			<figure class="fragment">
				<img
					src="/img/deploy-without-fear-slides-test-trophy.jpg"
					alt="Test Pyramid"
					style="height: 50%"
				/>
				<figcaption>Test Trophy</figcaption>
			</figure>
		</div>
		<p class="fragment">Pick the lowest level that gives value.</p>
	</section>
	<section data-auto-animate>
		<h2>Types of tests</h2>
		<h3>Which type to pick</h3>
		<p>
			you can use any of these tools to test anything, but you may not want to
		</p>
		<ul>
			<li>
				examples of tests with checkboxes
				<ul>
					<li>do we get value from this test?</li>
					<li>let’s pick the fastest test that gives us value</li>
					<li>
						unit test is no if mocking everything out makes it pass trivially
					</li>
				</ul>
			</li>
		</ul>
		<aside class="notes">
			test that business logic occurs where everything else passes through. we
			can test at all levels, but get all our value from the unit test
		</aside>
	</section>
	<section data-auto-animate>
		<h2>Types of tests</h2>
		<h3>Which type to pick</h3>
		<pre><code data-trim data-noescape data-line-numbers class="language-ts">
// pretend there is business logic here
  </code></pre>
		<table data-id="test-types-table">
			<thead>
				<tr>
					<th style="text-align: center">Unit</th>
					<th style="text-align: center">Integration</th>
					<th style="text-align: center">End-to-end</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td
						class="fragment"
						data-fragment-index="2"
						style="text-align: center"
					>
						✅
					</td>
					<td
						class="fragment"
						data-fragment-index="1"
						style="text-align: center"
					>
						✅
					</td>
					<td
						class="fragment"
						data-fragment-index="0"
						style="text-align: center"
					>
						✅
					</td>
				</tr>
			</tbody>
		</table>
		<aside class="notes">
			test that business logic occurs where everything else passes through. we
			can test at all levels, but get all our value from the unit test
		</aside>
	</section>
	<section data-auto-animate>
		<h2>Types of tests</h2>
		<h3>Which type to pick</h3>
		<pre><code data-trim data-noescape data-line-numbers class="language-ts">
// pretend there is a database query here
  </code></pre>
		<table data-id="test-types-table">
			<thead>
				<tr>
					<th style="text-align: center">Unit</th>
					<th style="text-align: center">Integration</th>
					<th style="text-align: center">End-to-end</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td
						class="fragment"
						data-fragment-index="2"
						style="text-align: center"
					>
						❌
					</td>
					<td
						class="fragment"
						data-fragment-index="1"
						style="text-align: center"
					>
						✅
					</td>
					<td
						class="fragment"
						data-fragment-index="0"
						style="text-align: center"
					>
						✅
					</td>
				</tr>
			</tbody>
		</table>
		<aside class="notes">
			test that we write a good database query. we can make a unit test, but we
			need to use mocks, so we don't get value. integration is the lowest level
			with value
		</aside>
	</section>
	<section data-auto-animate>
		<h2>Types of tests</h2>
		<h3>Which type to pick</h3>
		<pre><code data-trim data-noescape data-line-numbers class="language-ts">
// test that a user can record audio and submit a message
  </code></pre>
		<table data-id="test-types-table">
			<thead>
				<tr>
					<th style="text-align: center">Unit</th>
					<th style="text-align: center">Integration</th>
					<th style="text-align: center">End-to-end</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td
						class="fragment"
						data-fragment-index="2"
						style="text-align: center"
					>
						❌
					</td>
					<td
						class="fragment"
						data-fragment-index="1"
						style="text-align: center"
					>
						❌
					</td>
					<td
						class="fragment"
						data-fragment-index="0"
						style="text-align: center"
					>
						✅
					</td>
				</tr>
			</tbody>
		</table>
		<aside class="notes">
			test that a user can record audio and submit a message. we could write
			various integration tests but how can we prove that one leads to another
			and everything feeds into one another?
		</aside>
	</section>
	<section data-auto-animate>
		<h2>Types of tests</h2>
		<h3>Which type to pick</h3>
		<pre><code data-trim data-noescape data-line-numbers class="language-ts">
// test that... think about not having
  </code></pre>
		<table data-id="test-types-table">
			<thead>
				<tr>
					<th style="text-align: center">Unit</th>
					<th style="text-align: center">Integration</th>
					<th style="text-align: center">End-to-end</th>
				</tr>
			</thead>
			<tbody>
				<tr>
					<td
						class="fragment"
						data-fragment-index="2"
						style="text-align: center"
					>
						❌
					</td>
					<td
						class="fragment"
						data-fragment-index="1"
						style="text-align: center"
					>
						❌
					</td>
					<td
						class="fragment"
						data-fragment-index="0"
						style="text-align: center"
					>
						❌
					</td>
				</tr>
			</tbody>
		</table>
		<aside class="notes">
			test that... think about not having. hmm... I don't know, but the point is
			to convince that there are some ideas that don't have any testing value
		</aside>
	</section>
</section>
<section data-auto-animate data-auto-animate-restart>
	<section data-auto-animate>
		<h2>How to get started</h2>
		<h3>TDD</h3>
		<h3>Leave better than you found it</h3>
		<h3>E2E</h3>
	</section>
	<section data-auto-animate>
		<h2>How to get started</h2>
		<h3>TDD</h3>
		<p>TDD - start new unit tests with</p>
		<aside class="notes">Something here</aside>
	</section>
	<section data-auto-animate>
		<h2>How to get started</h2>
		<h3>Leave better than you found it</h3>
		<p>scary area you're afraid to make changes in? start by making a test</p>
		<aside class="notes">Something here</aside>
	</section>
	<section data-auto-animate>
		<h2>How to get started</h2>
		<h3>E2E</h3>
		<p>
			code all mixed up so it's tough to write simple unit or integration tests?
			maybe starting with an end-to-end would be good
		</p>
		<p>
			maybe that really is the lowest level that gives you value until you can
			rearchitect the code
		</p>
		<aside class="notes">Something here</aside>
	</section>
</section>
<section data-auto-animate data-auto-animate-restart>
	<h2>remember</h2>
	<ul>
		<li>start small and get it in the CI/CD pipelines</li>
		<li>make a commitment to add to test suites over time</li>
	</ul>
</section>
<section data-auto-animate data-auto-animate-restart>
	<h2>Delete tests that no longer serve you</h2>
</section>
<section data-auto-animate data-auto-animate-restart>
	<h2>Test until fear turns into boredom</h2>
	<p>Kent Back</p>
</section>
<section data-auto-animate data-auto-animate-restart>
	<h2>Test where your code gives you fear</h2>
</section>
<section data-auto-animate data-auto-animate-restart>
	<h2>Refactoring means not changing what happens</h2>
</section>
<section data-auto-animate data-auto-animate-restart>
	<h2>unit integration and end-to-end test definitions</h2>
</section>
<section data-auto-animate data-auto-animate-restart>
	<h2>Linters?</h2>
</section>
<section data-auto-animate data-auto-animate-restart>
	<h2>test behavior, not implementation</h2>
</section>
